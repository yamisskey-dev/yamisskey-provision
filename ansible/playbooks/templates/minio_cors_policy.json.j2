{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "MisskeyUserFullAccess",
      "Effect": "Allow",
      "Principal": {
        "AWS": ["arn:aws:iam::misskey-user"]
      },
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::{{ minio_bucket_name_for_misskey }}",
        "arn:aws:s3:::{{ minio_bucket_name_for_misskey }}/*"
      ]
    },
    {
      "Sid": "ActivityPubFederationAccess",
      "Effect": "Allow",
      "Principal": "*",
      "Action": [
        "s3:GetObject"
      ],
      "Resource": [
        "arn:aws:s3:::{{ minio_bucket_name_for_misskey }}/*",
        "arn:aws:s3:::{{ minio_bucket_name_for_outline }}/*"
      ],
      "Condition": {
        "StringLike": {
          "aws:UserAgent": [
            "*misskey*", "*Misskey*",
            "*pleroma*", "*Pleroma*",
            "*mastodon*", "*Mastodon*",
            "*firefish*", "*Firefish*",
            "*calckey*", "*Calckey*",
            "*foundkey*", "*Foundkey*",
            "*akkoma*", "*Akkoma*",
            "*sharkey*", "*Sharkey*",
            "*iceshrimp*", "*Iceshrimp*",
            "*gotosocial*", "*GoToSocial*",
            "*pixelfed*", "*Pixelfed*",
            "*outline*", "*Outline*",
            "*notion*", "*Notion*",
            "*activitypub*", "*ActivityPub*",
            "*federation*", "*fediverse*",
            "*http.rb*", "*ruby*",
            "*python-requests*", "*aiohttp*",
            "*go-fed*", "*golang*",
            "*node-fetch*", "*axios*",
            "*curl*", "*wget*",
            "http/*"
          ]
        }
      }
    }
  ]
}
